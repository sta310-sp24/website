{
  "hash": "08ec8cee3296dfe0337ba6b6d8cfb573",
  "result": {
    "markdown": "---\ntitle: \"Logistic regression\"\nauthor: \"Prof. Maria Tackett\"\ndate: \"February 5, 2024\"\ndate-format: \"MMM DD, YYYY\"\nfooter: \"[üîó STA 310 - Spring 2024](https://sta310-sp24.netlify.app)\"\nlogo: \"../images/logo.png\"\nformat: \n  revealjs:\n    theme: slides.scss\n    slide-number: true\n    multiplex: false\n    transition: fade\n    incremental: false \n    chalkboard: true\nhtml-math-method:\n  method: mathjax\n  url: \"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\"\nexecute:\n  freeze: auto\n  echo: true\n  warning: false\n  message: false\nknitr:\n  opts_chunk: \n    R.options:      \n    width: 200\nbibliography: references.bib\n---\n\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n## Topics\n\n-   Identify Bernoulli and binomial random variables\n\n-   Write GLM for binomial response variable\n\n-   Interpret the coefficients for a logistic regression model\n\n::: aside\nNotes based on Chapter 6 @roback2021beyond unless noted otherwise.\n:::\n\n# Basics of logistic regression\n\n## Bernoulli + Binomial random variables {.small}\n\nLogistic regression is used to analyze data with two types of responses:\n\n-   **Binary**: These responses take on two values success $(Y = 1)$ or failure $(Y = 0)$, yes $(Y = 1)$ or no $(Y = 0)$, etc.\n\n$$P(Y = y) = p^y(1-p)^{1-y} \\hspace{10mm} y = 0, 1$$\n\n-   **Binomial**: Number of successes in a Bernoulli process, $n$ independent trials with a constant probability of success $p$.\n\n$$P(Y = y) = {n \\choose y}p^{y}(1-p)^{n - y} \\hspace{10mm} y = 0, 1, \\ldots, n$$\n\n. . .\n\nIn both instances, the goal is to model $p$ the probability of success.\n\n## Binary vs. Binomial data {.midi}\n\n::: question\nFor each example, identify if the response is a Bernoulli or Binomial response:\n\n1.  Use median age and unemployment rate in a county to predict the percent of Obama votes in the county in the 2008 presidential election.\n2.  Use GPA and MCAT scores to estimate the probability a student is accepted into medical school.\n3.  Use sex, age, and smoking history to estimate the probability an individual has lung cancer.\n4.  Use offensive and defensive statistics from the 2017-2018 NBA season to predict a team's winning percentage.\n:::\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_05115268\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;margin:1.25%;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">03</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n## Logistic regression model  {.midi}\n\n$$\n\\log\\Big(\\frac{p}{1-p}\\Big) = \\beta_0 + \\beta_1x_1 + \\beta_2x_2 + \\dots + \\beta_px_p\n$$\n\n. . .\n\n-   The response variable, $\\log\\Big(\\frac{p}{1-p}\\Big)$, is the log(odds) of success, i.e. the logit\n\n. . .\n\n-   Use the model to calculate the probability of success $$\\hat{p} = \\frac{e^{\\beta_0 + \\beta_1x_1 + \\beta_2x_2 + \\dots + \\beta_px_p}}{1 + e^{\\beta_0 + \\beta_1x_1 + \\beta_2x_2 + \\dots + \\beta_px_p}}$$\n\n. . .\n\n-   When the response is a Bernoulli random variable, the probabilities can be used to classify each observation as a success or failure\n\n## Logistic vs linear regression model\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Graph from BMLR Chapter 6](07-logistic-intro_files/figure-revealjs/OLSlogistic-1.png){fig-align='center' width=60%}\n:::\n:::\n\n\n## Logit link\n\nBernoulli and Binomial random variables can be written in one-parameter exponential family form, $f(y;\\theta) = e^{[a(y)b(\\theta) + c(\\theta) + d(y)]}$\n\n**Bernoulli**\n\n$$f(y;p) = e^{y\\log(\\frac{p}{1-p}) + \\log(1-p)}$$\n\n**Binomial**\n\n$$f(y;n,p) = e^{y\\log(\\frac{p}{1-p}) + n\\log(1-p) + \\log{n \\choose y}}$$\n\n. . .\n\nThey have the same canonical link $b(p) = \\log\\big(\\frac{p}{1-p}\\big)$\n\n## Assumptions for logistic regression {.midi}\n\nThe following assumptions need to be satisfied to use logistic regression to make inferences\n\n1Ô∏è‚É£ $\\hspace{0.5mm}$ **Binary response**: The response is dichotomous (has two possible outcomes) or is the sum of dichotomous responses\n\n. . .\n\n2Ô∏è‚É£ $\\hspace{0.5mm}$ **Independence**: The observations must be independent of one another\n\n. . .\n\n3Ô∏è‚É£ $\\hspace{0.5mm}$ **Variance structure**: Variance of a binomial random variable is $np(1-p)$ $(n = 1 \\text{ for Bernoulli})$ , so the variability is highest when $p = 0.5$\n\n. . .\n\n4Ô∏è‚É£ $\\hspace{0.5mm}$ **Linearity**: The log of the odds ratio, $\\log\\big(\\frac{p}{1-p}\\big)$, must be a linear function of the predictors $x_1, \\ldots, x_p$\n\n## COVID-19 infection prevention practices at food establishments\n\nResearchers at Wollo Univeristy in Ethiopia conducted a study in July and August 2020 to understand factors associated with good COVID-19 infection prevention practices at food establishments. Their study is published in @andualem2022covid .\n\n<br>\n\nThey were particularly interested in the understanding implementation of prevention practices at food establishments, given the workers' increased risk due to daily contact with customers.\n\n## The data {.midi}\n\n*\"An institution-based cross-sectional study was conducted among* <b>*422 food handlers in Dessie City and Kombolcha Town food and drink establishments in July and August 2020.*</b> *The study participants were selected using a* <b>*simple random sampling*</b> *technique. Data were collected by trained data collectors using a pretested structured questionnaire and an on-the-spot observational checklist.\"*\n\n## Response variable\n\n*\"The outcome variable of this study was the* <b>*good or poor practices of COVID-19 infection prevention among food handlers*</b>*. Nine yes/no questions, one observational checklist and five multiple choice infection prevention practices questions were asked with a minimum score of 1 and maximum score of 25. Good infection prevention practice (the variable of interest) was determined for food handlers who scored 75% or above, whereas poor infection prevention practices refers to those food handlers who scored below 75% on the practice questions.\"*\n\n## Results\n\n![](images/07/logistic-output.PNG){fig-align=\"center\"}\n\n## Interpreting the results {.midi}\n\n::: question\n-   Is the response a Bernoulli or Binomial?\n\n-   What is the strongest predictor of having good COVID-19 infection prevention practices?\n\n    -   It's often unreliable to look answer this question just based on the model output. Why are we able to answer this question based on the model output in this case?\n\n-   Describe the effect (coefficient interpretation and inference) of having COVID-19 infection prevention policies available at the food establishment.\n\n-   The intercept describes what group of food handlers?\n:::\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_d8afc1e5\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;margin:1.25%;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">04</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">30</span></code>\n</div>\n```\n:::\n:::\n\n\n## References\n",
    "supporting": [
      "07-logistic-intro_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}