<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Prof.&nbsp;Maria Tackett">
  <title>STA 210 - Fall 2023 - Model comparison + cross validation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  
  <script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Model comparison + cross validation</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Prof.&nbsp;Maria Tackett 
</div>
</div>
</div>

  <p class="date">Oct 18, 2023</p>
</section>
<section id="announcements" class="slide level2">
<h2>Announcements</h2>
<ul>
<li><p>See Ed Discussion for upcoming events and internship opportunities</p></li>
<li><p>Statistics Experience due Mon, Nov 20 at 11:59pm</p></li>
<li><p>Prof.&nbsp;Tackett office hours Fridays 1:30 - 3:30pm</p></li>
</ul>
</section>
<section id="topics" class="slide level2">
<h2>Topics</h2>
<div>
<ul>
<li>ANOVA for Multiple Linear Regression and sum of squares</li>
<li>Comparing models with <span class="math inline">\(R^2\)</span> vs.&nbsp;<span class="math inline">\(R^2_{adj}\)</span></li>
<li>Comparing models with AIC and BIC</li>
<li>Occam’s razor and parsimony</li>
<li>Cross validation</li>
</ul>
</div>
</section>
<section id="computational-setup" class="slide level2">
<h2>Computational setup</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># load packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># set default theme and larger font size for ggplot2</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>ggplot2<span class="sc">::</span><span class="fu">theme_set</span>(ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section>
<section id="introduction" class="title-slide slide level1 center">
<h1>Introduction</h1>

</section>
<section id="data-restaurant-tips" class="slide level2">
<h2>Data: Restaurant tips</h2>
<p>Which variables help us predict the amount customers tip at a restaurant?</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 169 × 4
     Tip Party Meal   Age   
   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; 
 1  2.99     1 Dinner Yadult
 2  2        1 Dinner Yadult
 3  5        1 Dinner SenCit
 4  4        3 Dinner Middle
 5 10.3      2 Dinner SenCit
 6  4.85     2 Dinner Middle
 7  5        4 Dinner Yadult
 8  4        3 Dinner Middle
 9  5        2 Dinner Middle
10  1.58     1 Dinner SenCit
# ℹ 159 more rows</code></pre>
</div>
</div>
</section>
<section id="variables" class="slide level2">
<h2>Variables</h2>
<p><strong>Predictors</strong>:</p>
<div>
<ul>
<li><code>Party</code>: Number of people in the party</li>
<li><code>Meal</code>: Time of day (Lunch, Dinner, Late Night)</li>
<li><code>Age</code>: Age category of person paying the bill (Yadult, Middle, SenCit)</li>
</ul>
</div>
<p><strong>Outcome</strong>: <code>Tip</code>: Amount of tip</p>
</section>
<section id="outcome-tip" class="slide level2">
<h2>Outcome: <code>Tip</code></h2>

<img data-src="13-comparision-cv_files/figure-revealjs/unnamed-chunk-5-1.png" width="3000" class="r-stretch quarto-figure-center"></section>
<section id="predictors" class="slide level2">
<h2>Predictors</h2>

<img data-src="13-comparision-cv_files/figure-revealjs/unnamed-chunk-6-1.png" width="3000" class="r-stretch quarto-figure-center"></section>
<section id="relevel-categorical-predictors" class="slide level2">
<h2>Relevel categorical predictors</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>tips <span class="ot">&lt;-</span> tips <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="at">Meal =</span> <span class="fu">fct_relevel</span>(Meal, <span class="st">"Lunch"</span>, <span class="st">"Dinner"</span>, <span class="st">"Late Night"</span>),</span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="at">Age  =</span> <span class="fu">fct_relevel</span>(Age, <span class="st">"Yadult"</span>, <span class="st">"Middle"</span>, <span class="st">"SenCit"</span>)</span>
<span id="cb3-5"><a href="#cb3-5"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="predictors-again" class="slide level2">
<h2>Predictors, again</h2>

<img data-src="13-comparision-cv_files/figure-revealjs/unnamed-chunk-8-1.png" width="3000" class="r-stretch quarto-figure-center"></section>
<section id="outcome-vs.-predictors" class="slide level2">
<h2>Outcome vs.&nbsp;predictors</h2>

<img data-src="13-comparision-cv_files/figure-revealjs/unnamed-chunk-9-1.png" width="3600" class="r-stretch quarto-figure-center"></section>
<section id="fit-and-summarize-model" class="slide level2 midi">
<h2>Fit and summarize model</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>tip_fit <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">fit</span>(Tip <span class="sc">~</span> Party <span class="sc">+</span> Age, <span class="at">data =</span> tips)</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="fu">tidy</span>(tip_fit) <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std.error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-0.170</td>
<td style="text-align: right;">0.366</td>
<td style="text-align: right;">-0.465</td>
<td style="text-align: right;">0.643</td>
</tr>
<tr class="even">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1.837</td>
<td style="text-align: right;">0.124</td>
<td style="text-align: right;">14.758</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AgeMiddle</td>
<td style="text-align: right;">1.009</td>
<td style="text-align: right;">0.408</td>
<td style="text-align: right;">2.475</td>
<td style="text-align: right;">0.014</td>
</tr>
<tr class="even">
<td style="text-align: left;">AgeSenCit</td>
<td style="text-align: right;">1.388</td>
<td style="text-align: right;">0.485</td>
<td style="text-align: right;">2.862</td>
<td style="text-align: right;">0.005</td>
</tr>
</tbody>
</table>


</div>
</div>
<div class="fragment">
<p><br></p>
<div class="question">
<p>Is this the best model to explain variation in tips?</p>
</div>
</div>
</section>
<section id="another-model-summary" class="slide level2">
<h2>Another model summary</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">anova</span>(tip_fit<span class="sc">$</span>fit) <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">tidy</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">meansq</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
<td style="text-align: right;">1188.64</td>
<td style="text-align: right;">285.71</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
<td style="text-align: right;">19.01</td>
<td style="text-align: right;">4.57</td>
<td style="text-align: right;">0.01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
<td style="text-align: right;">4.16</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>


</div>
</div>
</section></section>
<section>
<section id="analysis-of-variance-anova" class="title-slide slide level1 center">
<h1>Analysis of variance (ANOVA)</h1>

</section>
<section id="analysis-of-variance-anova-1" class="slide level2">
<h2>Analysis of variance (ANOVA)</h2>
<p><br></p>

<img data-src="images/13/model-anova.png" class="r-stretch quarto-figure-center"></section>
<section id="anova" class="slide level2">
<h2>ANOVA</h2>
<ul>
<li><strong>Main Idea:</strong> Decompose the total variation on the outcome into:
<ul>
<li><p>the variation that can be explained by the each of the variables in the model</p></li>
<li><p>the variation that <strong>can’t</strong> be explained by the model (left in the residuals)</p></li>
</ul></li>
<li>If the variation that can be explained by the variables in the model is greater than the variation in the residuals, this signals that the model might be “valuable” (at least one of the <span class="math inline">\(\beta\)</span>s not equal to 0)</li>
</ul>
</section>
<section id="anova-output-in-r1" class="slide level2">
<h2>ANOVA output in R<sup>1</sup></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">anova</span>(tip_fit<span class="sc">$</span>fit) <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">tidy</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">meansq</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
<td style="text-align: right;">1188.64</td>
<td style="text-align: right;">285.71</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
<td style="text-align: right;">19.01</td>
<td style="text-align: right;">4.57</td>
<td style="text-align: right;">0.01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
<td style="text-align: right;">4.16</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>


</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p><a href="anova-table.html">Click here</a> for explanation about the way R calculates sum of squares for each variable.</p></li></ol></aside></section>
<section id="anova-output-with-totals" class="slide level2">
<h2>ANOVA output, with totals</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">meansq</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
<td style="text-align: left;">1188.64</td>
<td style="text-align: left;">285.71</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
<td style="text-align: left;">19.01</td>
<td style="text-align: left;">4.57</td>
<td style="text-align: left;">0.01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
<td style="text-align: left;">4.16</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">1913.11</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="sum-of-squares" class="slide level2">
<h2>Sum of squares</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">1188.64</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">38.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">686.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">168</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">1913.11</td>
</tr>
</tbody>
</table>


</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><span class="math inline">\(SS_{Total}\)</span>: Total sum of squares, variability of outcome, <span class="math inline">\(\sum_{i = 1}^n (y_i - \bar{y})^2\)</span></li>
<li><span class="math inline">\(SS_{Error}\)</span>: Residual sum of squares, variability of residuals, <span class="math inline">\(\sum_{i = 1}^n (y_i - \hat{y}_i)^2\)</span></li>
<li><span class="math inline">\(SS_{Model} = SS_{Total} - SS_{Error}\)</span>: Variability explained by the model</li>
</ul>
</div>
</div>
</section>
<section id="sum-of-squares-ss_total" class="slide level2">
<h2>Sum of squares: <span class="math inline">\(SS_{Total}\)</span></h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
</tr>
<tr class="even">
<td style="text-align: left; background-color: #D9E3E4 !important;">Total</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">168</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">1913.11</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<center>
<p><span class="math inline">\(SS_{Total}\)</span>: Total sum of squares, variability of outcome</p>
<p><br></p>
<p><span class="math inline">\(\sum_{i = 1}^n (y_i - \bar{y})^2\)</span> = 1913.11</p>
</center>
</section>
<section id="sum-of-squares-ss_error" class="slide level2">
<h2>Sum of squares: <span class="math inline">\(SS_{Error}\)</span></h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
</tr>
<tr class="odd">
<td style="text-align: left; background-color: #D9E3E4 !important;">Residuals</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">165</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">686.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">1913.11</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<center>
<p><span class="math inline">\(SS_{Error}\)</span>: Residual sum of squares, variability of residuals</p>
<p><br></p>
<p><span class="math inline">\(\sum_{i = 1}^n (y_i - \hat{y}_i)^2\)</span> = 686.44</p>
</center>
</section>
<section id="sum-of-squares-ss_model" class="slide level2">
<h2>Sum of squares: <span class="math inline">\(SS_{Model}\)</span></h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; background-color: #D9E3E4 !important;">Party</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">1</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">1188.64</td>
</tr>
<tr class="even">
<td style="text-align: left; background-color: #D9E3E4 !important;">Age</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">2</td>
<td style="text-align: right; background-color: #D9E3E4 !important;">38.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">1913.11</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<center>
<p><span class="math inline">\(SS_{Model}\)</span>: Variability explained by the model</p>
<p><br></p>
<p><span class="math inline">\(SS_{Total} - SS_{Error}\)</span> = 1226.67</p>
</center>
</section>
<section id="r-squared-r2" class="slide level2">
<h2>R-squared, <span class="math inline">\(R^2\)</span></h2>
<p><strong>Recall</strong>: <span class="math inline">\(R^2\)</span> is the proportion of the variation in the response variable explained by the regression model.</p>
<div class="fragment">
<p><span class="math display">\[
R^2 = \frac{SS_{Model}}{SS_{Total}} = 1 - \frac{SS_{Error}}{SS_{Total}} = 1 - \frac{686.44}{1913.11} = 0.641
\]</span></p>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">glance</span>(tip_fit)<span class="sc">$</span>r.squared</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6411891</code></pre>
</div>
</div>
</div>
</section></section>
<section>
<section id="model-comparison" class="title-slide slide level1 center">
<h1>Model comparison</h1>

</section>
<section id="r-squared-r2-1" class="slide level2">
<h2>R-squared, <span class="math inline">\(R^2\)</span></h2>
<ul>
<li><span class="math inline">\(R^2\)</span> will always increase as we add more variables to the model + If we add enough variables, we can always achieve <span class="math inline">\(R^2=100\%\)</span></li>
<li>If we only use <span class="math inline">\(R^2\)</span> to choose a best fit model, we will be prone to choose the model with the most predictor variables</li>
</ul>
</section>
<section id="adjusted-r2" class="slide level2">
<h2>Adjusted <span class="math inline">\(R^2\)</span></h2>
<ul>
<li><strong>Adjusted</strong> <span class="math inline">\(R^2\)</span>: measure that includes a penalty for unnecessary predictor variables</li>
<li>Similar to <span class="math inline">\(R^2\)</span>, it is a measure of the amount of variation in the response that is explained by the regression model</li>
<li>Differs from <span class="math inline">\(R^2\)</span> by using the mean squares rather than sums of squares and therefore adjusting for the number of predictor variables</li>
</ul>
</section>
<section id="r2-and-adjusted-r2" class="slide level2">
<h2><span class="math inline">\(R^2\)</span> and Adjusted <span class="math inline">\(R^2\)</span></h2>
<p><span class="math display">\[R^2 = \frac{SS_{Model}}{SS_{Total}} = 1 - \frac{SS_{Error}}{SS_{Total}}\]</span></p>
<p><br></p>
<div class="fragment">
<p><span class="math display">\[R^2_{adj} = 1 - \frac{SS_{Error}/(n-p-1)}{SS_{Total}/(n-1)}\]</span></p>
<p>where</p>
<ul>
<li><p><span class="math inline">\(n\)</span> is the number of observations used to fit the model</p></li>
<li><p><span class="math inline">\(p\)</span> is the number of terms (predictors + intercept) in the model</p></li>
</ul>
</div>
</section>
<section id="using-r2-and-adjusted-r2" class="slide level2">
<h2>Using <span class="math inline">\(R^2\)</span> and Adjusted <span class="math inline">\(R^2\)</span></h2>
<ul>
<li>Adjusted <span class="math inline">\(R^2\)</span> can be used as a quick assessment to compare the fit of multiple models; however, it should not be the only assessment!</li>
<li>Use <span class="math inline">\(R^2\)</span> when describing the relationship between the response and predictor variables</li>
</ul>
</section>
<section id="comparing-models-with-r2_adj" class="slide level2 smaller">
<h2>Comparing models with <span class="math inline">\(R^2_{adj}\)</span></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>tip_fit_1 <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">fit</span>(Tip <span class="sc">~</span> Party <span class="sc">+</span> </span>
<span id="cb9-4"><a href="#cb9-4"></a>            Age <span class="sc">+</span> </span>
<span id="cb9-5"><a href="#cb9-5"></a>            Meal,</span>
<span id="cb9-6"><a href="#cb9-6"></a>      </span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="at">data =</span> tips)</span>
<span id="cb9-8"><a href="#cb9-8"></a></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="fu">glance</span>(tip_fit_1) <span class="sc">|&gt;</span> </span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="fu">select</span>(r.squared, adj.r.squared)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  r.squared adj.r.squared
      &lt;dbl&gt;         &lt;dbl&gt;
1     0.674         0.664</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>tip_fit_2 <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">fit</span>(Tip <span class="sc">~</span> Party <span class="sc">+</span> </span>
<span id="cb11-4"><a href="#cb11-4"></a>            Age <span class="sc">+</span> </span>
<span id="cb11-5"><a href="#cb11-5"></a>            Meal <span class="sc">+</span> </span>
<span id="cb11-6"><a href="#cb11-6"></a>            Day, </span>
<span id="cb11-7"><a href="#cb11-7"></a>      <span class="at">data =</span> tips)</span>
<span id="cb11-8"><a href="#cb11-8"></a></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="fu">glance</span>(tip_fit_2) <span class="sc">|&gt;</span> </span>
<span id="cb11-10"><a href="#cb11-10"></a>  <span class="fu">select</span>(r.squared, adj.r.squared)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  r.squared adj.r.squared
      &lt;dbl&gt;         &lt;dbl&gt;
1     0.683         0.662</code></pre>
</div>
</div>
</div>
</div>
<div class="question">
<ol type="1">
<li>Why did we not use the full <code>recipe()</code> workflow to fit Model 1 or Model 2?</li>
<li>Which model would we choose based on �2?</li>
<li>Which model would we choose based on Adjusted �2?</li>
<li>Which statistic should we use to choose the final model - �2 or Adjusted �2? Why?</li>
</ol>
</div>
</section>
<section id="aic-bic" class="slide level2">
<h2>AIC &amp; BIC</h2>
<p>Estimators of prediction error and <em>relative</em> quality of models:</p>
<div class="fragment">
<p><strong>Akaike’s Information Criterion (AIC)</strong>: <span class="math display">\[AIC = n\log(SS_\text{Error}) - n \log(n) + 2(p+1)\]</span> <br></p>
</div>
<div class="fragment">
<p><strong>Schwarz’s Bayesian Information Criterion (BIC)</strong>: <span class="math display">\[BIC = n\log(SS_\text{Error}) - n\log(n) + log(n)\times(p+1)\]</span></p>
</div>
</section>
<section id="aic-bic-1" class="slide level2">
<h2>AIC &amp; BIC</h2>
<p><span class="math display">\[
\begin{aligned}
&amp; AIC = \color{blue}{n\log(SS_\text{Error})} - n \log(n) + 2(p+1) \\
&amp; BIC = \color{blue}{n\log(SS_\text{Error})} - n\log(n) + \log(n)\times(p+1)
\end{aligned}
\]</span></p>
<div class="fragment">
<p><br></p>
<p>First Term: Decreases as <em>p</em> increases</p>
</div>
</section>
<section id="aic-bic-2" class="slide level2">
<h2>AIC &amp; BIC</h2>
<p><span class="math display">\[
\begin{aligned}
&amp; AIC = n\log(SS_\text{Error}) - \color{blue}{n \log(n)} + 2(p+1) \\
&amp; BIC = n\log(SS_\text{Error}) - \color{blue}{n\log(n)} + \log(n)\times(p+1)
\end{aligned}
\]</span></p>
<p><br></p>
<p>Second Term: Fixed for a given sample size <em>n</em></p>
</section>
<section id="aic-bic-3" class="slide level2">
<h2>AIC &amp; BIC</h2>
<p><span class="math display">\[
\begin{aligned} &amp; AIC = n\log(SS_\text{Error}) - n\log(n) + \color{blue}{2(p+1)} \\
&amp; BIC = n\log(SS_\text{Error}) - n\log(n) + \color{blue}{\log(n)\times(p+1)}
\end{aligned}
\]</span></p>
<p><br></p>
<p>Third Term: Increases as <em>p</em> increases</p>
</section>
<section id="using-aic-bic" class="slide level2">
<h2>Using AIC &amp; BIC</h2>
<p><span class="math display">\[
\begin{aligned} &amp; AIC = n\log(SS_{Error}) - n \log(n) + \color{red}{2(p+1)} \\
&amp; BIC = n\log(SS_{Error}) - n\log(n) + \color{red}{\log(n)\times(p+1)}
\end{aligned}
\]</span></p>
<ul>
<li><p>Choose model with the smaller value of AIC or BIC</p></li>
<li><p>If <span class="math inline">\(n \geq 8\)</span>, the <strong>penalty</strong> for BIC is larger than that of AIC, so BIC tends to favor <em>more parsimonious</em> models (i.e.&nbsp;models with fewer terms)</p></li>
</ul>
</section>
<section id="comparing-models-with-aic-and-bic" class="slide level2">
<h2>Comparing models with AIC and BIC</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>tip_fit_1 <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">fit</span>(Tip <span class="sc">~</span> Party <span class="sc">+</span> </span>
<span id="cb13-4"><a href="#cb13-4"></a>            Age <span class="sc">+</span> </span>
<span id="cb13-5"><a href="#cb13-5"></a>            Meal,</span>
<span id="cb13-6"><a href="#cb13-6"></a>      </span>
<span id="cb13-7"><a href="#cb13-7"></a>      <span class="at">data =</span> tips)</span>
<span id="cb13-8"><a href="#cb13-8"></a></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="fu">glance</span>(tip_fit_1) <span class="sc">|&gt;</span> </span>
<span id="cb13-10"><a href="#cb13-10"></a>  <span class="fu">select</span>(AIC, BIC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
    AIC   BIC
  &lt;dbl&gt; &lt;dbl&gt;
1  714.  736.</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>tip_fit_2 <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">fit</span>(Tip <span class="sc">~</span> Party <span class="sc">+</span> </span>
<span id="cb15-4"><a href="#cb15-4"></a>            Age <span class="sc">+</span> </span>
<span id="cb15-5"><a href="#cb15-5"></a>            Meal <span class="sc">+</span> </span>
<span id="cb15-6"><a href="#cb15-6"></a>            Day, </span>
<span id="cb15-7"><a href="#cb15-7"></a>      <span class="at">data =</span> tips)</span>
<span id="cb15-8"><a href="#cb15-8"></a></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="fu">glance</span>(tip_fit_2) <span class="sc">|&gt;</span> </span>
<span id="cb15-10"><a href="#cb15-10"></a>  <span class="fu">select</span>(AIC, BIC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
    AIC   BIC
  &lt;dbl&gt; &lt;dbl&gt;
1  720.  757.</code></pre>
</div>
</div>
</div>
</div>
<div class="question">
<ol type="1">
<li><p>Which model would we choose based on AIC?</p></li>
<li><p>Which model would we choose based on BIC?</p></li>
</ol>
</div>
</section>
<section id="commonalities-between-criteria" class="slide level2">
<h2>Commonalities between criteria</h2>
<ul>
<li><span class="math inline">\(R^2_{adj}\)</span>, AIC, and BIC all apply a penalty for more predictors</li>
<li>The penalty for added model complexity attempts to strike a balance between underfitting (too few predictors in the model) and overfitting (too many predictors in the model)</li>
<li>Goal: <strong>Parsimony</strong></li>
</ul>
</section>
<section id="parsimony-and-occams-razor" class="slide level2 small">
<h2>Parsimony and Occam’s razor</h2>
<ul>
<li><p>The principle of <strong>parsimony</strong> is attributed to William of Occam (early 14th-century English nominalist philosopher), who insisted that, given a set of equally good explanations for a given phenomenon, <em>the correct explanation is the simplest explanation</em><sup>1</sup></p></li>
<li><p>Called <strong>Occam’s razor</strong> because he “shaved” his explanations down to the bare minimum</p></li>
<li><p>Parsimony in modeling:</p>
<div>
<ul>
<li>models should have as few parameters as possible</li>
<li>linear models should be preferred to non-linear models</li>
<li>experiments relying on few assumptions should be preferred to those relying on many</li>
<li>models should be pared down until they are <em>minimal adequate</em></li>
<li>simple explanations should be preferred to complex explanations</li>
</ul>
</div></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn2"><p>Source: The R Book by Michael J. Crawley.</p></li></ol></aside></section>
<section id="in-pursuit-of-occams-razor" class="slide level2">
<h2>In pursuit of Occam’s razor</h2>
<ul>
<li><p>Occam’s razor states that among competing hypotheses that predict equally well, the one with the fewest assumptions should be selected</p></li>
<li><p>Model selection follows this principle</p></li>
<li><p>We only want to add another variable to the model if the addition of that variable brings something valuable in terms of predictive power to the model</p></li>
<li><p>In other words, we prefer the simplest best model, i.e.&nbsp;<strong>parsimonious</strong> model</p></li>
</ul>
</section>
<section id="alternate-views" class="slide level2 midi">
<h2>Alternate views</h2>
<blockquote>
<p>Sometimes a simple model will outperform a more complex model . . . Nevertheless, I believe that deliberately limiting the complexity of the model is not fruitful when the problem is evidently complex. Instead, if a simple model is found that outperforms some particular complex model, the appropriate response is to define a different complex model that captures whatever aspect of the problem led to the simple model performing well.</p>
<p><br></p>
<p>Radford Neal - Bayesian Learning for Neural Networks<sup>1</sup></p>
</blockquote>
<aside><ol class="aside-footnotes"><li id="fn3"><p>Suggested blog post: <a href="https://statmodeling.stat.columbia.edu/2012/06/26/occam-2/">Occam</a> by Andrew Gelman</p></li></ol></aside></section>
<section id="other-concerns-with-our-approach" class="slide level2 midi">
<h2>Other concerns with our approach</h2>
<ul>
<li>All criteria we considered for model comparison require making predictions for our data and then uses the prediction error (<span class="math inline">\(SS_{Error}\)</span>) somewhere in the formula</li>
<li>But we’re making prediction for the data we used to build the model (estimate the coefficients), which can lead to <strong>overfitting</strong></li>
<li>Instead we should
<ul>
<li><p>split our data into testing and training sets</p></li>
<li><p>“train” the model on the training data and pick a few models we’re genuinely considering as potentially good models</p></li>
<li><p>test those models on the testing set</p></li>
<li><p>…and repeat this process multiple times</p></li>
</ul></li>
</ul>
</section></section>
<section>
<section id="cross-validation" class="title-slide slide level1 center">
<h1>Cross validation</h1>

</section>
<section id="spending-our-data" class="slide level2">
<h2>Spending our data</h2>
<ul>
<li>We have already established that the idea of data spending where the test set was recommended for obtaining an unbiased estimate of performance.</li>
<li>However, we usually need to understand the effectiveness of the model <u><em>before</em></u> <em>using the test set</em>.</li>
<li>Typically we can’t decide on <em>which</em> final model to take to the test set without making model assessments.</li>
<li><strong>Remedy:</strong> Resampling to make model assessments on training data in a way that can generalize to new data.</li>
</ul>
</section>
<section id="resampling-for-model-assessment" class="slide level2">
<h2>Resampling for model assessment</h2>
<p><strong>Resampling is only conducted on the</strong> <u><strong>training</strong></u> <strong>set</strong>. The test set is not involved. For each iteration of resampling, the data are partitioned into two subsamples:</p>
<ul>
<li>The model is fit with the <strong>analysis set</strong>. Model fit statistics such as <span class="math inline">\(R^2_{Adj}\)</span>, AIC, and BIC are calculated based on this fit.</li>
<li>The model is evaluated with the <strong>assessment set</strong>.</li>
</ul>
</section>
<section id="resampling-for-model-assessment-1" class="slide level2">
<h2>Resampling for model assessment</h2>

<img data-src="images/16/resampling.svg" class="r-stretch quarto-figure-center"><p><br></p>
<p>Image source: Kuhn and Silge. <a href="https://www.tmwr.org/">Tidy modeling with R</a>.</p>
</section>
<section id="analysis-and-assessment-sets" class="slide level2">
<h2>Analysis and assessment sets</h2>
<ul>
<li>Analysis set is analogous to training set.</li>
<li>Assessment set is analogous to test set.</li>
<li>The terms <em>analysis</em> and <em>assessment</em> avoids confusion with initial split of the data.</li>
<li>These data sets are mutually exclusive.</li>
</ul>
</section>
<section id="cross-validation-1" class="slide level2">
<h2>Cross validation</h2>
<p>More specifically, <strong>v-fold cross validation</strong> – commonly used resampling technique:</p>
<ul>
<li>Randomly split your <strong>training</strong> <strong>data</strong> into <strong><em>v</em></strong> partitions</li>
<li>Use <strong><em>v-1</em></strong> partitions for analysis, and the remaining 1 partition for analysis (model fit + model fit statistics)</li>
<li>Repeat <strong><em>v</em></strong> times, updating which partition is used for assessment each time</li>
</ul>
<div class="fragment">
<p>Let’s give an example where <code>v = 3</code>…</p>
</div>
</section>
<section id="to-get-started" class="slide level2">
<h2>To get started…</h2>
<p><strong>Split data into training and test sets</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">set.seed</span>(<span class="dv">345</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a>tips_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(tips)</span>
<span id="cb17-4"><a href="#cb17-4"></a>tips_train <span class="ot">&lt;-</span> <span class="fu">training</span>(tips_split)</span>
<span id="cb17-5"><a href="#cb17-5"></a>tips_test <span class="ot">&lt;-</span> <span class="fu">testing</span>(tips_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="to-get-started-1" class="slide level2">
<h2>To get started…</h2>
<p><strong>Create recipe</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>tips_rec1 <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Tip <span class="sc">~</span> Party <span class="sc">+</span> Age <span class="sc">+</span> Meal, </span>
<span id="cb18-2"><a href="#cb18-2"></a>                    <span class="at">data =</span> tips_train)</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>tips_rec1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="to-get-started-2" class="slide level2 midi">
<h2>To get started…</h2>
<p><strong>Specify model</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>tips_spec <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><strong>Create workflow</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>tips_wflow1 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">add_model</span>(tips_spec) <span class="sc">|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">add_recipe</span>(tips_rec1)</span>
<span id="cb20-4"><a href="#cb20-4"></a></span>
<span id="cb20-5"><a href="#cb20-5"></a>tips_wflow1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: linear_reg()

── Preprocessor ────────────────────────────────────────────────────────────────
0 Recipe Steps

── Model ───────────────────────────────────────────────────────────────────────
Linear Regression Model Specification (regression)

Computational engine: lm </code></pre>
</div>
</div>
</div>
</section>
<section id="cross-validation-step-1" class="slide level2">
<h2>Cross validation, step 1</h2>
<p>Randomly split your <strong>training</strong> <strong>data</strong> into 3 partitions:</p>
<p><br></p>

<img data-src="images/16/three-CV.svg" class="r-stretch quarto-figure-center"></section>
<section id="tips-split-training-data" class="slide level2">
<h2>Tips: Split training data</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(tips_train, <span class="at">v =</span> <span class="dv">3</span>)</span>
<span id="cb22-2"><a href="#cb22-2"></a>folds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#  3-fold cross-validation 
# A tibble: 3 × 2
  splits          id   
  &lt;list&gt;          &lt;chr&gt;
1 &lt;split [84/42]&gt; Fold1
2 &lt;split [84/42]&gt; Fold2
3 &lt;split [84/42]&gt; Fold3</code></pre>
</div>
</div>
</section>
<section id="cross-validation-steps-2-and-3" class="slide level2">
<h2>Cross validation, steps 2 and 3</h2>
<div>
<ul>
<li>Use <em>v-1</em> partitions for analysis, and the remaining 1 partition for assessment</li>
<li>Repeat <em>v</em> times, updating which partition is used for assessment each time</li>
</ul>
</div>

<img data-src="images/16/three-CV-iter.svg" class="r-stretch quarto-figure-center"></section>
<section id="tips-fit-resamples" class="slide level2 midi">
<h2>Tips: Fit resamples</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>tips_fit_rs1 <span class="ot">&lt;-</span> tips_wflow1 <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">fit_resamples</span>(folds)</span>
<span id="cb24-3"><a href="#cb24-3"></a></span>
<span id="cb24-4"><a href="#cb24-4"></a>tips_fit_rs1 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Resampling results
# 3-fold cross-validation 
# A tibble: 3 × 4
  splits          id    .metrics         .notes          
  &lt;list&gt;          &lt;chr&gt; &lt;list&gt;           &lt;list&gt;          
1 &lt;split [84/42]&gt; Fold1 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;
2 &lt;split [84/42]&gt; Fold2 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;
3 &lt;split [84/42]&gt; Fold3 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</code></pre>
</div>
</div>
</section>
<section id="cross-validation-now-what" class="slide level2">
<h2>Cross validation, now what?</h2>
<ul>
<li>We’ve fit a bunch of models</li>
<li>Now it’s time to use them to collect metrics (e.g., $R^2$, AIC, RMSE, etc. ) on each model and use them to evaluate model fit and how it varies across folds</li>
</ul>
</section>
<section id="collect-r2-and-rmse-from-cv" class="slide level2">
<h2>Collect <span class="math inline">\(R^2\)</span> and RMSE from CV</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># Produces summary across all CV</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="fu">collect_metrics</span>(tips_fit_rs1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  .metric .estimator  mean     n std_err .config             
  &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard   2.10      3  0.243  Preprocessor1_Model1
2 rsq     standard   0.591     3  0.0728 Preprocessor1_Model1</code></pre>
</div>
</div>
<p><br></p>
<p>Note: These are calculated using the <em>assessment</em> data</p>
</section>
<section id="deeper-look-into-r2-and-rmse" class="slide level2">
<h2>Deeper look into <span class="math inline">\(R^2\)</span> and RMSE</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>cv_metrics1 <span class="ot">&lt;-</span> <span class="fu">collect_metrics</span>(tips_fit_rs1, <span class="at">summarize =</span> <span class="cn">FALSE</span>) </span>
<span id="cb28-2"><a href="#cb28-2"></a></span>
<span id="cb28-3"><a href="#cb28-3"></a>cv_metrics1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  id    .metric .estimator .estimate .config             
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 Fold1 rmse    standard       2.04  Preprocessor1_Model1
2 Fold1 rsq     standard       0.736 Preprocessor1_Model1
3 Fold2 rmse    standard       1.71  Preprocessor1_Model1
4 Fold2 rsq     standard       0.509 Preprocessor1_Model1
5 Fold3 rmse    standard       2.54  Preprocessor1_Model1
6 Fold3 rsq     standard       0.528 Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="better-tabulation-of-r2-and-rmse-from-cv" class="slide level2">
<h2>Better tabulation of <span class="math inline">\(R^2\)</span> and RMSE from CV</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>cv_metrics1 <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">mutate</span>(<span class="at">.estimate =</span> <span class="fu">round</span>(.estimate, <span class="dv">3</span>)) <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> id, <span class="at">names_from =</span> .metric, <span class="at">values_from =</span> .estimate) <span class="sc">|&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>  <span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Fold"</span>, <span class="st">"RMSE"</span>, <span class="st">"R-squared"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Fold</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">R-squared</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Fold1</td>
<td style="text-align: right;">2.036</td>
<td style="text-align: right;">0.736</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fold2</td>
<td style="text-align: right;">1.709</td>
<td style="text-align: right;">0.509</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Fold3</td>
<td style="text-align: right;">2.545</td>
<td style="text-align: right;">0.528</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="how-does-rmse-compare-to-y" class="slide level2 small">
<h2>How does RMSE compare to y?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Cross validation RMSE stats:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>cv_metrics1 <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">filter</span>(.metric <span class="sc">==</span> <span class="st">"rmse"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb31-4"><a href="#cb31-4"></a>    <span class="at">min =</span> <span class="fu">min</span>(.estimate),</span>
<span id="cb31-5"><a href="#cb31-5"></a>    <span class="at">max =</span> <span class="fu">max</span>(.estimate),</span>
<span id="cb31-6"><a href="#cb31-6"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(.estimate),</span>
<span id="cb31-7"><a href="#cb31-7"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(.estimate)</span>
<span id="cb31-8"><a href="#cb31-8"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
    min   max  mean    sd
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  1.71  2.54  2.10 0.421</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>Training data tips:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>tips_train <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">summarise</span>(</span>
<span id="cb33-3"><a href="#cb33-3"></a>    <span class="at">min =</span> <span class="fu">min</span>(Tip),</span>
<span id="cb33-4"><a href="#cb33-4"></a>    <span class="at">max =</span> <span class="fu">max</span>(Tip),</span>
<span id="cb33-5"><a href="#cb33-5"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(Tip),</span>
<span id="cb33-6"><a href="#cb33-6"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(Tip)</span>
<span id="cb33-7"><a href="#cb33-7"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
    min   max  mean    sd
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     0  19.5  4.87  3.37</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="calculate-r2_adj-aic-and-bic-for-each-fold" class="slide level2 midi">
<h2>Calculate <span class="math inline">\(R^2_{Adj}\)</span>, AIC, and BIC for each fold</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># Function to get Adj R-sq, AIC, BIC</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>calc_model_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="fu">glance</span>(<span class="fu">extract_fit_parsnip</span>(x)) <span class="sc">|&gt;</span></span>
<span id="cb35-4"><a href="#cb35-4"></a>    <span class="fu">select</span>(adj.r.squared, AIC, BIC)</span>
<span id="cb35-5"><a href="#cb35-5"></a>}</span>
<span id="cb35-6"><a href="#cb35-6"></a></span>
<span id="cb35-7"><a href="#cb35-7"></a><span class="co"># Fit model and calculate statistics for each fold</span></span>
<span id="cb35-8"><a href="#cb35-8"></a>tips_fit_rs1 <span class="ot">&lt;-</span>tips_wflow1 <span class="sc">|&gt;</span></span>
<span id="cb35-9"><a href="#cb35-9"></a>  <span class="fu">fit_resamples</span>(<span class="at">resamples =</span> folds, </span>
<span id="cb35-10"><a href="#cb35-10"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">extract =</span> calc_model_stats))</span>
<span id="cb35-11"><a href="#cb35-11"></a></span>
<span id="cb35-12"><a href="#cb35-12"></a>tips_fit_rs1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Resampling results
# 3-fold cross-validation 
# A tibble: 3 × 5
  splits          id    .metrics         .notes           .extracts       
  &lt;list&gt;          &lt;chr&gt; &lt;list&gt;           &lt;list&gt;           &lt;list&gt;          
1 &lt;split [84/42]&gt; Fold1 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble [1 × 2]&gt;
2 &lt;split [84/42]&gt; Fold2 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble [1 × 2]&gt;
3 &lt;split [84/42]&gt; Fold3 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble [1 × 2]&gt;</code></pre>
</div>
</div>
</section>
<section id="collect-r2_adj-aic-bic-from-cv" class="slide level2 midi">
<h2>Collect <span class="math inline">\(R^2_{Adj}\)</span>, AIC, BIC from CV</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">map_df</span>(tips_fit_rs1<span class="sc">$</span>.extracts, <span class="sc">~</span> .x[[<span class="dv">1</span>]][[<span class="dv">1</span>]]) <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="fu">bind_cols</span>(<span class="at">Fold =</span> tips_fit_rs1<span class="sc">$</span>id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  adj.r.squared   AIC   BIC Fold 
          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
1         0.550  369.  386. Fold1
2         0.659  377.  394. Fold2
3         0.718  337.  354. Fold3</code></pre>
</div>
</div>
<p><br></p>
<p>Note: These are based on the model fit from the <em>analysis</em> data</p>
</section>
<section id="cross-validation-jargon" class="slide level2">
<h2>Cross validation jargon</h2>
<ul>
<li>Referred to as <em>v-fold</em> or <em>k-fold</em> cross validation</li>
</ul>
<p>Also commonly abbreviated as CV</p>
</section>
<section id="cross-validation-in-practice" class="slide level2">
<h2>Cross validation in practice</h2>
<div>
<ul>
<li class="fragment"><p>To illustrate how CV works, we used <code>v = 3</code>:</p>
<div>
<ul>
<li>Analysis sets are 2/3 of the training set</li>
<li>Each assessment set is a distinct 1/3</li>
<li>The final resampling estimate of performance averages each of the 3 replicates</li>
</ul>
</div></li>
<li class="fragment"><p>This was useful for illustrative purposes, but <code>v = 3</code> is a poor choice in practice</p></li>
<li class="fragment"><p>Values of <code>v</code> are most often 5 or 10; we generally prefer 10-fold cross-validation as a default</p></li>
</ul>
</div>
</section>
<section id="recap" class="slide level2">
<h2>Recap</h2>
<ul>
<li>ANOVA for multiple linear regression and sum of squares</li>
<li>Comparing models with
<ul>
<li><span class="math inline">\(R^2\)</span> vs.&nbsp;<span class="math inline">\(R^2_{Adj}\)</span></li>
<li>AIC and BIC</li>
</ul></li>
<li>Occam's razor and parsimony</li>
</ul>
<!-- -->
<ul>
<li><p>Cross validation for</p>
<ul>
<li><p>model evaluation</p></li>
<li><p>model comparison</p></li>
</ul></li>
</ul>


<img src="../images/logo.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p><a href="https://sta210-fa23.netlify.app/schedule">🔗 STA 210 - Fall 2023 - Schedule</a></p>
</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>